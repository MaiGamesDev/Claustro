[gd_scene load_steps=21 format=2]

[ext_resource path="res://Source/Level/Battlefield/Camera.gd" type="Script" id=1]
[ext_resource path="res://Source/Level/Battlefield/Tank.gd" type="Script" id=2]
[ext_resource path="res://Source/Effect/ShootEffect.tscn" type="PackedScene" id=3]
[ext_resource path="res://Mesh/Pershing_tank/barrel.obj" type="ArrayMesh" id=4]
[ext_resource path="res://Mesh/Pershing_tank/hull.obj" type="ArrayMesh" id=5]
[ext_resource path="res://Mesh/Pershing_tank/upside.obj" type="ArrayMesh" id=6]

[sub_resource type="ConvexPolygonShape" id=4]
points = PoolVector3Array( 0.65306, 0.288773, -0.144468, 0.65306, 0.208109, -0.144468, 0.65306, 0.288773, -0.199657, 0.526972, 0.464069, -0.00420761, 0.548183, 0.420183, 0.567048, 0.548772, 0.3962, 0.603638, 0.554428, 0.251006, 0.603028, 0.497748, -0.0108251, -0.0124403, 0.65306, 0.208109, -0.199657, 0.612405, 0.18425, 0.157854, 0.54453, 0.0936973, 0.602875, 0.529446, 0.0486989, 0.407426, 0.497748, -0.00717822, 0.194596, 0.612405, 0.288773, -0.509145, 0.547358, 0.419565, -0.545887, 0.538049, 0.447132, -0.383063, 0.528622, 0.459742, -0.38291, 0.39181, 0.615382, 0.403767, 0.39181, 0.615382, 0.407273, 0.538284, 0.432483, 0.567048, 0.538284, 0.401145, 0.61492, 0.538284, 0.0991367, 0.61309, -0.519088, -0.016079, -0.0124403, -0.502708, -0.012494, -0.717401, 0.497748, -0.00866168, -0.437337, -0.519088, -0.012494, 0.194596, 0.497748, -0.00717822, -0.718773, 0.612405, 0.18425, -0.509145, 0.274324, 0.0991367, 0.663096, 0.529446, 0.074845, 0.567048, 0.264779, 0.0725579, 0.567048, -5.78165e-06, 0.0702709, 0.567048, 0.546769, 0.316526, -0.717248, 0.54724, 0.381427, -0.66648, 0.538284, 0.394099, -0.66648, 0.538284, 0.432051, -0.545734, 0.388275, 0.615382, 0.403767, 0.269846, 0.533112, -0.0783016, 0.255116, 0.533112, -0.0796737, 0.388275, 0.615382, 0.407273, -5.78165e-06, 0.401145, 0.680324, 0.274324, 0.401145, 0.664925, -0.519088, -0.0142247, -0.384892, -0.550787, 0.0433832, 0.407426, -0.519088, -0.0127412, -0.669834, -0.509072, 0.158104, -0.716638, -0.485857, -0.0120613, -0.730055, 0.48726, -0.00693097, -0.730055, -0.275396, 0.0699001, 0.567048, -0.550787, 0.069591, 0.567048, 0.520726, 0.154025, -0.72914, 0.531214, 0.161195, -0.717858, -5.78165e-06, 0.0991367, 0.678647, 0.538284, 0.315042, -0.728225, 0.23638, 0.2706, -0.876413, -5.78165e-06, 0.394099, -0.66648, -5.78165e-06, 0.432051, -0.545734, -5.78165e-06, 0.473217, -0.38291, 0.255116, 0.50474, -0.219019, 0.297067, 0.50474, -0.214903, 0.283987, 0.518401, -0.149347, 0.240504, 0.533112, -0.0783016, -0.470421, 0.457331, -0.38291, 0.255116, 0.518401, -0.152243, -0.479966, 0.430011, 0.567048, -0.25666, 0.399909, 0.664925, -0.470421, 0.454921, -0.0124403, -0.265616, 0.249523, 0.664011, -0.274454, 0.0991367, 0.663096, -0.541478, 0.24977, 0.567048, -0.525569, 0.189381, -0.668157, -0.49281, 0.314115, -0.714809, -0.479966, 0.31257, -0.728225, -0.22013, 0.269488, -0.876413, -0.221426, 0.132391, -0.877023, 0.225421, 0.13406, -0.877023, -0.534172, 0.0912867, 0.600894, 0.000465572, 0.2706, -0.876413, -0.25666, 0.392801, -0.66648, -0.25666, 0.430753, -0.545734, -0.479966, 0.429578, -0.545734, -0.251828, 0.465058, -0.38291, -0.484679, 0.442311, -0.383063, -0.484561, 0.440024, -0.0124403, -0.495638, 0.415733, 0.567048, -0.479966, 0.398673, 0.61492, -0.515671, 0.0991367, 0.61309, -0.515907, 0.24909, 0.601961, -0.494224, 0.392677, 0.601503, -0.494106, 0.41462, -0.545887, -0.525569, 0.208048, -0.547106, -0.494224, 0.376421, -0.666633, -0.479966, 0.391564, -0.66648, 0.000465572, 0.133256, -0.877023 )

[sub_resource type="SpatialMaterial" id=5]
params_cull_mode = 2
albedo_color = Color( 0.294118, 0.32549, 0.12549, 1 )

[sub_resource type="SpatialMaterial" id=3]
albedo_color = Color( 0.294118, 0.32549, 0.12549, 1 )

[sub_resource type="Gradient" id=11]
offsets = PoolRealArray( 0.320755, 0.433962 )
colors = PoolColorArray( 1, 0, 0, 1, 0, 0, 0, 1 )

[sub_resource type="GradientTexture" id=6]
gradient = SubResource( 11 )

[sub_resource type="Curve" id=1]
_data = [ Vector2( 0, 0.344318 ), 0.0, 0.0, 0, 0, Vector2( 0.155039, 1 ), 0.0, 0.0, 0, 0, Vector2( 0.317829, 1 ), 0.0, 0.0, 0, 0, Vector2( 0.534884, 0.232955 ), 0.0, 0.0, 0, 0, Vector2( 0.806201, 0.238636 ), 0.0, 0.0, 0, 0, Vector2( 0.993808, 0 ), 0.0, 0.0, 0, 0 ]

[sub_resource type="CurveTexture" id=2]
curve = SubResource( 1 )

[sub_resource type="ParticlesMaterial" id=7]
direction = Vector3( 0, 1, 0 )
spread = 30.0
gravity = Vector3( 0, 0, 0 )
initial_velocity = 2.0
initial_velocity_random = 0.2
scale_curve = SubResource( 2 )
color_ramp = SubResource( 6 )

[sub_resource type="SpatialMaterial" id=8]
vertex_color_use_as_albedo = true

[sub_resource type="SphereMesh" id=12]
material = SubResource( 8 )
radius = 0.2
height = 0.4

[sub_resource type="ConvexPolygonShape" id=13]
points = PoolVector3Array( 0.906176, 0.39241, 1.56869, 0.61896, 0.645598, 1.58117, 0.557579, 0.658822, 1.59614, 0.906176, 0.373575, 1.56869, 0.906176, 0.473921, 1.54062, 0.608138, 0.652811, 1.58117, 0.906176, 0.546054, 1.5032, 0.365273, 0.677657, 1.59614, 0, 0.71172, 1.59645, 0, 0.58204, 1.59645, 0.554208, 0.58204, 1.59614, 0.595365, 0.655376, 1.58117, 0.906176, 0.684389, 1.24526, 0.713161, 0.742577, 1.03099, -0.906176, 0.373575, 1.56869, 0.886662, 0.214882, 1.51754, 0.886662, -0.000154704, 1.09181, 0.886662, -0.000315, -1.10422, 0.906176, 0.473841, -1.48785, 0.906176, 0.632934, 1.41524, -0.365451, 0.677657, 1.59614, -0.557756, 0.658822, 1.59614, 0, 0.795474, 1.03099, -0.713339, 0.742577, 1.03099, -0.554385, 0.58204, 1.59614, 0.906176, 0.70643, 1.07559, 0.713161, 0.754599, 0.889704, -0.886839, -0.000154704, 1.09181, -0.886839, 0.214882, 1.51754, -0.906176, 0.39241, 1.56869, -0.906176, 0.473841, -1.48785, -0.886839, -0.000315, -1.10422, 0.886662, 0.042484, -1.19997, 0.906176, 0.499247, -1.58984, -0.595543, 0.655376, 1.58117, -0.608316, 0.652811, 1.58117, -0.619137, 0.645598, 1.58117, -0.906176, 0.684389, 1.24526, 0, 0.807416, 0.889704, -0.713339, 0.754599, 0.889704, -0.906176, 0.70643, 1.07559, 0.906176, 0.714445, 0.784285, 0.713161, 0.754599, -0.853461, 0, 0.818477, -0.853461, -0.906176, 0.473921, 1.54062, -0.906176, 0.499247, -1.58984, -0.886839, 0.042484, -1.19997, 0.886662, 0.345524, -1.5075, 0.906176, 0.51135, -1.58984, -0.906176, 0.632934, 1.41524, -0.906176, 0.546054, 1.5032, -0.906176, 0.714445, 0.784285, -0.713339, 0.754599, -0.853461, 0.906176, 0.714445, -0.748041, 0.906176, 0.713162, -1.36153, 0.36616, 0.784334, -1.16411, 0, 0.818477, -1.16411, -0.906176, 0.51135, -1.58984, -0.886839, 0.345524, -1.5075, 0.906176, 0.622275, -1.5365, -0.906176, 0.714445, -0.748041, -0.366338, 0.784334, -1.16411, -0.906176, 0.713162, -1.36153, 0.906176, 0.694408, -1.43888, -0.531855, 0.747947, -1.43108, -0.531855, 0.74955, -1.42547, -0.531855, 0.750111, -1.41986, -0.906176, 0.622275, -1.5365, 0.906176, 0.663711, -1.48785, -0.531855, 0.742016, -1.44075, -0.906176, 0.694408, -1.43888, -0.531855, 0.745382, -1.43639, -0.906176, 0.663711, -1.48785 )

[sub_resource type="SpatialMaterial" id=14]
params_cull_mode = 2
albedo_color = Color( 0.294118, 0.32549, 0.12549, 1 )

[sub_resource type="Animation" id=9]
length = 0.001
tracks/0/type = "value"
tracks/0/path = NodePath("Turret/gun/FirePoint/ShootEffect:emitting")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0 ),
"transitions": PoolRealArray( 1 ),
"update": 0,
"values": [ false ]
}

[sub_resource type="Animation" id=10]
resource_name = "shoot"
length = 0.2
tracks/0/type = "value"
tracks/0/path = NodePath("Turret/gun/FirePoint/ShootEffect:emitting")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/keys = {
"times": PoolRealArray( 0, 0.1 ),
"transitions": PoolRealArray( 1, 1 ),
"update": 1,
"values": [ true, false ]
}

[node name="Pershing" type="VehicleBody"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.16666, 0 )
script = ExtResource( 2 )

[node name="Turret" type="CollisionShape" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.804, 0 )
shape = SubResource( 4 )

[node name="turret" type="MeshInstance" parent="Turret"]
material_override = SubResource( 5 )
mesh = ExtResource( 6 )
skeleton = NodePath("")
material/0 = null
material/1 = null
material/2 = null
material/3 = null
material/4 = null

[node name="gun" type="MeshInstance" parent="Turret"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.207821, -0.774566 )
material_override = SubResource( 3 )
mesh = ExtResource( 4 )
skeleton = NodePath("")
material/0 = null
material/1 = null
material/2 = null

[node name="FirePoint" type="Position3D" parent="Turret/gun"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.0686367, -1.91368 )

[node name="ShootEffect" parent="Turret/gun/FirePoint" instance=ExtResource( 3 )]
transform = Transform( -1, -1.50996e-07, 6.60024e-15, 0, -4.37114e-08, -1, 1.50996e-07, -1, 4.37114e-08, 0, 0, 0 )
visible = false
emitting = false
process_material = SubResource( 7 )
draw_pass_1 = SubResource( 12 )

[node name="Hull" type="CollisionShape" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.04, 0 )
shape = SubResource( 13 )

[node name="hull" type="MeshInstance" parent="Hull"]
material_override = SubResource( 14 )
mesh = ExtResource( 5 )
skeleton = NodePath("")
material/0 = null
material/1 = null
material/2 = null
material/3 = null
material/4 = null
material/5 = null
material/6 = null
material/7 = null
material/8 = null
material/9 = null
material/10 = null
material/11 = null
material/12 = null
material/13 = null
material/14 = null
material/15 = null
material/16 = null
material/17 = null
material/18 = null
material/19 = null
material/20 = null
material/21 = null
material/22 = null
material/23 = null
material/24 = null
material/25 = null
material/26 = null
material/27 = null
material/28 = null
material/29 = null
material/30 = null
material/31 = null
material/32 = null
material/33 = null
material/34 = null
material/35 = null

[node name="Wheel_FL" type="VehicleWheel" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.7, 0.220487, -1.08 )
use_as_steering = true
wheel_radius = 0.25

[node name="Wheel_FR" type="VehicleWheel" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.7, 0.22, -1.08 )
use_as_steering = true
wheel_radius = 0.25

[node name="Wheel_BL" type="VehicleWheel" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.7, 0.22, 1.05 )
use_as_traction = true
wheel_radius = 0.25

[node name="Wheel_BR" type="VehicleWheel" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.7, 0.22, 1.05 )
use_as_traction = true
wheel_radius = 0.25

[node name="SpringArm" type="SpringArm" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.1, 0 )
spring_length = 5.0
script = ExtResource( 1 )

[node name="Camera" type="ClippedCamera" parent="SpringArm"]

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
anims/RESET = SubResource( 9 )
anims/shoot = SubResource( 10 )
